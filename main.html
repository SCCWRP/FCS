<!DOCTYPE html>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/> 
  <head>
    <title>Fish Consumption Study v.1.0</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" /> 
        <link rel="stylesheet" href="css/jqm-icon-pack-fa.css" /> 
        <link rel="stylesheet" href="css/font-awesome.min.css" />
        <link rel="stylesheet" href="css/orig/web.css" />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.css" />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />
	<link rel="stylesheet" href="css/jquery.mobile.simpledialog.min.css" /> 
        <meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
  </head>
  <body>
    <div data-role="page" data-theme="b" id="one">
	<div data-role="header" data-theme="b" id="header" class="ui-corner-top"></div> 
	<div id="content"></div>
	<div data-role="footer" data-theme="b" id="footer">Footer</div>
	<div id="log">Log Content</div>
    <div> 
    <div id="popupInfo" data-role="popup" class="ui-content" data-position-to="" data-dismissible="false" data-history="false"></div>
    <div id="popupRestart" data-role="popup" class="ui-content" data-position-to="" data-dismissible="false" data-history="false"></div>
    <div id="popupTip" data-role="popup" data-theme="a" data-position-to="#footer" data-tap-toggle="false"></div>
	<script src="js/vendor/jquery-1.11.0.min.js"></script> 
	<script src="js/orig/jquery.mobile-1.3.1.min.js"></script>
	<script src="js/vendor/underscore-min.js"></script>
	<script src="js/vendor/backbone-min.js"></script>
	<script src="js/vendor/backbone.dualstorage.js"></script>
	<script src="js/vendor/json2.js"></script>
	<script src="js/vendor/chance.min.js"></script>
	<script type="text/javascript" src="js/vendor/jquery.mobile.simpledialog2.min.js"></script>
	<script type="text/javascript" src="js/vendor/fastclick.js"></script>
    	<script type="text/template" id="tpl-intro-details">
	<div id="landing" data-theme="b">
	  <ul id="landList" data-role="listview">
		<li id='startSurvey'><a data-role="button" class="libtn"><br><br><br>Start Survey</a></li>
		<li id='submitData'><a data-role="button" class="libtn"><br><br><br>Submit to SCCWRP</a></li>
		<!-- <li id='getUtilities'><a data-role="button" class="libtn"><br><br><br>Utilities</a></li> // -->
	  </ul>
	</div>
	</script>
    	<script type="text/template" id="tpl-utility-details">
	<div id="landing" data-theme="b">
	  <ul id="landList" data-role="listview">
		<li class="boxed2"><a id='saveLocal'><h1><center><span class="liDown"><br>Test Local Storage Data</span></center></h1></a></li>
		<li class="boxed2"><a id='saveLocalSD'><h1><center><span class="liDown"><br>Save Local Storage Data to SD</span></center></h1></a></li>
		<li class="boxed2"><a id='showLocalSD'><h1><center><span class="liDown"><br>Directory Listing of SD</span></center></h1></a></li>
		<li class="boxed2"><a id='showGPS'><h1><center><span class="liDown"><br>Show Coordinates</span></center></h1></a></li>
		<li class="boxed2"><a id='showCamera'><h1><center><span class="liDown"><br>Show Camera</span></center></h1></a></li>
		<li class="boxed2"><a id='deleteLocal'><h1><center><span class="liDown"><br>Delete Local Storage Data</span></center></h1></a></li>
	  </ul>
	</div>
	</script>
	<script type="text/template" id="tpl-camera-details">
		Camera
	</script>
	<script type="text/template" id="tpl-storage-details">
		Local SD	
	</script>
	<script type="text/template" id="tpl-storage-list-details">
		LIst Directory Local SD	
	</script>
	<script type="text/template" id="tpl-footer-details">
	 <div id="progBars" class="boxed">
	   <form>
 	    <fieldset id="footButtons" class="ui-grid-b">
		<div id="back" class = "ui-block-a"><a href="#" data-role="button" id="backButton"><div id='backButtonText'>Back</div></a></div>
		<div id="restart" class = "ui-block-b"><a href="#" data-role="button" id="saveRestartButton">Save</a></div> 
		<div id="forward" class = "ui-block-c"><a href="#" data-role="button" id="multi"><div id='multiButtonText' >Next</div></a></div>
	    </fieldset>
	   </form>
	   <fieldset id="botBars" class="ui-grid-a"><div id="fullLabel" class = "ui-block-a"><p>Total (%):</p></div>
	     <div id="Full-bar" class = "ui-block-b"><input type="range" name="slider2" id="Fullprogress-bar" value="0" min="0" max="100" data-highlight="true"></div>
     	   </fieldset>
	  </div>
	</script>
	<script type="text/template" id="tpl-header-details">
                <select name="language" id="language">
                	<option id="0" value="English">English</option>
                	<option id="1" value="Spanish">Spanish</option>
                </select>
		<h1 id="question" class="ui-title" role="heading" aria-level="1">Fish Consumption Study</h1>
		<form>
		<a href="./index.html" id="home" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
		</form>
	</script>
	<script type="text/template" id="tpl-question-details">
		<h1 id="question" class="ui-title" role="heading" aria-level="1"><%= title %></h1>
	</script>
	<script type="text/template" id="tpl-dialog-details">
			<li class="edit" name="edit" id="<%= id %>"><%= id %> - <%= timestamp %></li>
	</script>
	<script type="text/template" id="tpl-receipt-details">
    	<div id="aid" class="form-center-col"><h3>Session Receipt</h3>
		<a href="#" id="finish" data-role="button" data-icon="check" class="finish">Looks Good/Finish</a>
		<h4>Fish Consumption Survey</h4>
		<button data-icon="edit" class="edit" id=1 name=1>Click here to redo this survey</button>
		<ul data-role="listview" data-inset="true">
		<% var mod = _.pick(elements, 'q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10'); %>
		<% _.each(mod, function(element,index,list) {  var qindex = Number(index.substr(1))-1; %>
		<% if(!element) return;  %>
			<% element = JSON.stringify(element).replace(/\\"/g, "").replace("\\", "").replace(/\"/g, "").replace("{","").replace("}", "");  %> 
			<li data-role="list-divider"><span class="tip"><%= questionObject[qindex].title %></span>Question <%= qindex %></li>
			<li>
			<% _.each(element.split(","), function(e,i,l) { %>
				<p> <%= e %> </p>
			<% }); %>
			</li>
		<% }); %>
		</ul>
		<a href="#" id="finish" data-role="button" data-icon="check" class="finish">Looks Good/Finish</a>
	</div>
	</script>
	<script type="text/template" id="tpl-restart-details">
	    <div data-role="header" data-theme="b" class="ui-corner-top"><h3>Restart App?</h3></div>
	    <div data-role="content" data-theme="b" class="ui-corner-bottom ui-content">
	    	<fieldset>
	    		<h3>Are you sure you want to restart the App? <br> Your submission from this session will be saved.</h3>
			<a href="#" data-role="button" data-inline=true id="restartCancel">Cancel</a>
			<a href="#" data-role="button" data-inline=true id="restartRestart">Restart</a>
		</fieldset>
	    </div>
	</script>
	<script type="text/template" id="tpl-answer-details">
	  <% if((type) == "radio"){ %>
	  <!--
	  <h3>Radio Question - <%= qcount %> - <%= type %></h3>
         	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
          	<label>Question ID:</label>
         	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		<button id="save" class="save">Save</button>
	  // -->
		<% if(decline == "yes") { %>
			<button id="decline" class="decline">Decline and save</button>
			<% }; %>
	  <div id="multi-radio" class="ui-field-contain" data-role='fieldcontain'>
	   <form id ="aid" >
	    <div style="margin: 0 auto; display: table; width: 19em; position:relative;">
		    <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain" data-mini="true">
			<% for(i=0; i < menu.length; i++) { %>
			 <label class="radioClassLabel" id= <%= "radioLabel-" + String.fromCharCode(97 + i)  %> >
			 <input type="radio" id="radio-ID" name="radioSelect" value= <%= menu[i] %> />
			 <span class="ui-btn-inner"><span class="ui-btn-text" id= <%= "radio-text-" + String.fromCharCode(97 +i)  %> > <%= menu[i] %> </span></span></label>
			<% }; %>
		</fieldset>
	    </div> 
	   </form>
	 </div>
	  <% } else if ((type) == "numberSelect"){  %>
	  	<!-- 
         	<label>User ID:</label>
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
		// -->
		<div class="ui-field-contain" data-inset="true">
		  <input type="number" id="aid">
    		  <select name="aidscale" id="aidscale">
		  <% var dates = menu; %>
		  <% for(i=0;i < menu.length;i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		 <% }; %>
		</div>
	  <% } else if ((type) == "multi"){  %>
	    <div id="multi-view" data-role="fieldcontain">
		<!-- <h3>Multi Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
		// -->
		<div class="ui-field-contain ui-body ui-br" data-inset="true">
			<fieldset data-role="controlgroup" id="aid">
			<% for(i=0; i < menu.length; i++) { %>
			<input type="checkbox" class="custom" value= "<%= menu[i] %>"  name = <%= "multi-checkbox-" + i.toString() %> id= <%= "multi-checkbox-" + i.toString() %> />
				<label for=<%= "multi-checkbox-" + i.toString()  %> >  <%= menu[i] %> </label> 
	 		<% }; %>
			</fieldset>
		</div>
		<!-- <button id="save" class="save">Save</button> // -->
	    </div>
	  <% } else if ((type) == "select"){  %>
	  <div id="multi-select">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset class="ui-field-contain">
    		  <select name="aid" id="aid" class="selectClass">
		  <% for(i=0; i < menu.length; i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		  <% }; %>
    		  </select>
		  <!-- <button id="save" class="save">Save</button> // -->
    	    </div>
	  <% } else if ((type) == "dateSelect"){  %>
	  <div id="multi-select">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset class="ui-field-contain">
		  <% var dates = q26.split(","); %>
		  <% dates = dates.map(function(x) { return new Date(Date.parse(x));}); %>  
		  <% days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; %>
		  <% days[new Date().getDay()] = "Today"; %>
		  <% for(j=0; j < dates.length; j++) { %>
		  <h3 id="date" name = <%= (dates[j].getMonth() + 1) + "/" + dates[j].getDate() + "/" + (1900 + dates[j].getYear()) %> > <%= days[dates[j].getDay()]  %> </h3>
		  <select name= "<%= j %>" id="aid" class="multi-select">
		  <% for(i=0; i < menu.length; i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		  <% }; %>
    		  </select>
		  <% }; %>
	 	 </fieldset>
		 <% var script = "$('[name=0]').on('change', function() {$('[id=aid]').each(function() { $(this).val($('[name=0]').val()); $(this).parent().find('.ui-btn-text').text($('[name=0]').val()); })}) " %>
		 <%= "<script" + ">" + script + "</script" + ">"%> 
	  <% } else if ((type) == "dateTimeInterval"){  %>
	  <div id="multi-select">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset id="multi-select-time" class="ui-field-contain">
		  <% var dates = q26.split(","); %>
		  <% dates = dates.map(function(x) { return new Date(Date.parse(x));}); %>  
		  <% days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; %>
		  <% days[new Date().getDay()] = "Today"; %>
		  <% var AmArray = _.range(48).map(function(x) {if(x<4) x=x+48; return Math.floor(x/4) + ":" + ["00", 15, 30, 45][x % 4] + " AM";}); %>
		  <% var PmArray = _.range(48).map(function(x) {if(x<4) x=x+48; return Math.floor(x/4) + ":" + ["00", 15, 30, 45][x % 4] + " PM";}); %> 
		  <% var TimeArray = AmArray.concat(PmArray); %>
		  <% TimeArray = TimeArray.slice(20, TimeArray.length); %>
		  <%= "<script" + "> TimeArray = [" + ("'" + TimeArray.join("','") + "'").split(",") + "];</script" + ">" %>
		  <% for(j=0; j < dates.length; j++) { %>
		  <h3 id="date" name = <%= (dates[j].getMonth() + 1) + "/" + dates[j].getDate() + "/" + (1900 + dates[j].getYear()) %> > <%= days[dates[j].getDay()] %> </h3>
		  <select name= <%=  "enter" + j  %> id="aid" class="enter">
			  <option id="0" value="Select One">Select Enter</option>
		  <% for(i=0; i < TimeArray.length; i++) { %>
		 	 <option id= <%= i %> value="<%= TimeArray[i] %>" > <%= TimeArray[i] %> </option>
		  <% }; %> 
		  </select>
		  <select name = <%= "exit" + j  %> id="aid" class="exit">
			  <option id="0" value="Select One">Select Exit</option>
		  </select>
		  <% var script = "(function(){var start = $('[name=enter" + j + "]');start.on('change', function() {var index = start.children(':selected').attr('id');var end = $('[name=exit" + j + "]');end.find('option').remove();end.append($('<option></option>').attr('value', 'Select One').text('Select One'));for(i=Number(index)+1; i < 96; i++) {end.append($('<option></option>').attr('value', TimeArray[i]).text(TimeArray[i]));};});})();" %>
		  <%= "<script" + ">" + script + "</script" + ">" %>
		  <% }; %>
		</fieldset>
		<% var propagate1 = "$('[name=enter0]').on('change', function() {$('.enter').not('[name=enter0]').each(function () {$(this).val($('[name=enter0]').val());$(this).trigger('change');})});" %>
		<% var propagate2 = "$('[name=exit0]').on('change', function() {$('.exit').not('[name=exit0]').each(function () {$(this).val($('[name=exit0]').val());$(this).trigger('change');})});" %>
		<%= "<script" + ">" + propagate1 +  "</script" + ">" %>
		<%= "<script" + ">" + propagate2 +  "</script" + ">" %>
	  <% } else if ((type) == "text"){  %>
	  <div class="ui-field-contain">
		<!--
		<h3>Text Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
        	<label>Answer</label>
		// -->
		<input type="text" id="aid" name="aid" class="text-view" placeholder= <%= placeholder %> value="" required/>
		<!-- <button id="save" class="save">Save</button> // -->
		<% if(decline == "yes") { %>
			<button id="decline" class="decline">Decline and save</button>
			<% }; %>
    	    </div>
	  <% } else if (type == "sevenday"){  %>
	  	<!-- 
         	<label>User ID:</label>
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
          	<label>Question ID:</label>
          	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
          	<label>Answer</label>
		// -->
		<div id="multi-view">
		  <div class="ui-field-contain" data-inset="true">
			<fieldset data-role="controlgroup" id="aid">
			<% today = new Date; %>
			<% days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; %>
			<% days = days.slice(0, today.getDay() + 1 ).reverse().concat(days.slice(today.getDay() + 1, 7).reverse()); %>
			<% days[0] = "Today";	 %>
			<% for(i=0; i < 7; i++) { %>
			<% newday = new Date(new Date().setDate(new Date().getDate()-i)); %> 
			<input type="checkbox" class="custom" value= <%= (newday.getMonth()+1) + "/" + (newday.getDate()) + "/" + (newday.getYear() + 1900)  %>  name = <%= days[i] %>  id= <%= days[i] %> />
			<label for= <%= days[i] %> >  <%= days[i] %> </label> 
	 		<% }; %>
			<% if(qcount == "26" && decline == "yes") { %>
			<!-- <input type="button"  name="decline" id="decline" class="decline">Did not Enter</input> // -->
				<input type="checkbox" class="decline" value="decline" name="decline" id="decline" />
				<label for="decline" class="decline">Did not Enter</label> 
			<% }; %>
			</fieldset>
		  </div>
		</div>
	  <% } %>
	</script>
	<script src="js/globals.js"></script>
	<script src="js/views/IntroView.js"></script>
	<script src="js/models/Answer.js"></script>
	<script src="js/models/Question.js"></script>
	<script src="js/models/Receipt.js"></script>
	<script src="js/collections/QuestionList.js"></script>
	<script src="js/collections/AnswerList.js"></script>
	<script src="js/collections/ReceiptList.js"></script>
	<script src="js/views/AnswerListView.js"></script>
	<script src="js/views/DialogView.js"></script>
	<script src="js/views/FooterView.js"></script>
	<script src="js/views/HeaderView.js"></script>
	<script src="js/views/QuestionListView.js"></script>
	<script src="js/views/ReceiptView.js"></script>
	<script src="js/views/RestartView.js"></script>
	<script src="js/views/StorageView.js"></script>
	<script src="js/views/StorageListView.js"></script>
	<script src="js/views/UtilitiesView.js"></script>
	<script src="js/application.js"></script>
  </body>
</html>
